{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseURL","services_persons","axios","get","object","post","id","put","concat","delete","Persons","_ref","persons","removePerson","react_default","a","createElement","Fragment","map","person","index","key","name","number","onClick","PersonForm","_ref2","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Filter","_ref3","filterName","handleFilterNameChange","Notification","_ref4","messageObject","message","className","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setFilterName","_useState9","_useState10","errorMessage","setErrorMessage","useEffect","personService","then","response","console","log","data","changeMessage","arguments","length","undefined","personsToShow","filter","includes","App_Notification","App_Filter","event","target","App_PersonForm","preventDefault","some","window","confirm","personID","find","catch","error","setTimeout","alert","App_Persons","removedPerson","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e1d68bcd.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseURL = '/api/persons'\n\nconst getAll = () => {\n    return axios.get(baseURL)\n}\nconst savePerson = object => {\n    return axios.post(baseURL, object)\n}\nconst updatePerson = (object, id) => {\n    return axios.put(`${baseURL}/${id}`, object)\n}\nconst deletePerson = id => {\n    return axios.delete(`${baseURL}/${id}`)\n}\nexport default {getAll, savePerson, updatePerson, deletePerson}\n","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport './index.css'\n\nconst Persons = ({persons, removePerson}) => {\n  return (\n    <>\n    {persons.map((person, index) => <div key={index}>{person.name} {person.number} <button onClick={() => removePerson(person.id)}>Delete</button> </div>)}\n    </>\n  )\n}\n\n\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => {\n  return (\n    <>\n    <form onSubmit={addPerson}>\n        <div> name: <input value={newName} onChange={handleNameChange}/>  </div>\n        <div> number: <input value={newNumber} onChange={handleNumberChange}/>  </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </>\n  )\n}\n\nconst Filter = ({filterName, handleFilterNameChange}) => {\n  return (\n    <>\n    Filter shown with name: <input value={filterName} onChange={handleFilterNameChange}/>\n    </>\n  )\n}\n\nconst Notification = ({messageObject}) => {\n  if(messageObject.message===null){\n  return null\n  }else{\n    return (\n      <div className={messageObject.type}>\n        {messageObject.message}\n      </div>\n    )\n  }\n}\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filterName, setFilterName] = useState('')\n  const [errorMessage, setErrorMessage] = useState({message: null, type: 'error'})\n\n\n\n\n  useEffect(() => {\n    personService.getAll()\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response.data)\n      })\n  }, [])\n\n  const changeMessage = (message=null, type='error') => {\n    const newMessage = {\n      message: message,\n      type: type\n    }\n    setErrorMessage(newMessage)\n  }\n\n  console.log('rendered', persons.length, 'persons')\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterNameChange = (event) => {\n    setFilterName(event.target.value)\n  }\n  const checkExistingName = () => {\n    return persons.some(person => person.name === newName)\n  }\n  const checkExistingNumber = () => {\n    return persons.some(person => person.number === newNumber)\n  }\n\n\n  const addPerson = event => {\n    event.preventDefault()\n    if(checkExistingName(newName)){\n      if(window.confirm(`${newName} already exists! Replace the old number with a new one?`)){\n        const personID = persons.find(person => person.name === newName).id\n        const newPerson = {\n          name: newName,\n          number: newNumber,\n        }\n        personService.updatePerson(newPerson, personID)\n        .catch(error => {\n          changeMessage('Failed to update person!', 'error')\n          setTimeout(() => changeMessage(), 5000)\n        })\n        .then(response => {\n          setPersons(persons.map(person => person.id !== personID ? person: response.data))\n        })\n        return\n      }else{\n        return\n      }\n    }\n    if(checkExistingNumber(newNumber)){\n      window.alert(`An entry with the number ${newNumber} already exists!`)\n      return\n    }\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    }\n    personService.savePerson(newPerson)\n    .then(response => {\n      console.log(response)\n      setPersons(persons.concat(response.data))\n    })\n    changeMessage(`Added ${newName}`, 'success')\n    setTimeout(() => changeMessage(), 5000)\n\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n\n\n  const removePerson = id => {\n    const removedPerson = persons.find(person => person.id === id).name\n    if(window.confirm(`Deleting id:${id}, are you sure?`)){\n      personService\n      .deletePerson(id)\n      .catch(error => {\n        changeMessage(`${removedPerson} was already removed`, 'error')\n        setTimeout(() => changeMessage(), 5000)\n        return\n      })\n      setPersons(persons.filter(person => person.id !== id))\n      changeMessage(`Removed ${removedPerson}`, 'success')\n      setTimeout(()=>changeMessage(), 5000)\n      return\n    }else{\n      return\n    }\n  }\n\n\n  const personsToShow = persons.filter(person => person.name.includes(filterName))\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification messageObject={errorMessage}/>\n      <Filter filterName={filterName} handleFilterNameChange={handleFilterNameChange}/>\n      <h2>Add a new person</h2>\n      <PersonForm\n      addPerson={addPerson}\n      newName={newName}\n      newNumber={newNumber}\n      handleNameChange={handleNameChange}\n      handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={personsToShow} removePerson={removePerson}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\n/* import './index.css'; */\nimport App from './App'\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}