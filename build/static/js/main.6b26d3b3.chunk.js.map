{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseURL","services_persons","axios","get","object","post","id","put","concat","delete","Persons","_ref","persons","removePerson","react_default","a","createElement","Fragment","map","person","index","key","name","number","onClick","PersonForm","_ref2","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Filter","_ref3","filterName","handleFilterNameChange","Notification","_ref4","messageObject","message","className","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setFilterName","_useState9","_useState10","errorMessage","setErrorMessage","useEffect","personService","then","response","data","changeMessage","arguments","length","undefined","personsToShow","filter","includes","App_Notification","App_Filter","event","target","App_PersonForm","preventDefault","some","setTimeout","window","confirm","find","newPerson","objectSpread","n","catch","error","JSON","stringify","App_Persons","removedPerson","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.6b26d3b3.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseURL = '/api/persons'\n\nconst getAll = () => {\n    return axios.get(baseURL)\n}\nconst savePerson = object => {\n    return axios.post(baseURL, object)\n}\nconst updatePerson = (object, id) => {\n    return axios.put(`${baseURL}/${id}`, object)\n}\nconst deletePerson = id => {\n    return axios.delete(`${baseURL}/${id}`)\n}\nexport default {getAll, savePerson, updatePerson, deletePerson}\n","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport './index.css'\n\nconst Persons = ({persons, removePerson}) => {\n  return (\n    <>\n    {persons.map((person, index) => <div key={index}>{person.name} {person.number} <button onClick={() => removePerson(person.id)}>Delete</button> </div>)}\n    </>\n  )\n}\n\n\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => {\n  return (\n    <>\n    <form onSubmit={addPerson}>\n        <div> name: <input value={newName} onChange={handleNameChange}/>  </div>\n        <div> number: <input value={newNumber} onChange={handleNumberChange}/>  </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </>\n  )\n}\n\nconst Filter = ({filterName, handleFilterNameChange}) => {\n  return (\n    <>\n    Filter shown with name: <input value={filterName} onChange={handleFilterNameChange}/>\n    </>\n  )\n}\n\nconst Notification = ({messageObject}) => {\n  if(messageObject.message===null){\n  return null\n  }else{\n    return (\n      <div className={messageObject.type}>\n        {messageObject.message}\n      </div>\n    )\n  }\n}\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filterName, setFilterName] = useState('')\n  const [errorMessage, setErrorMessage] = useState({message: null, type: 'error'})\n\n\n\n\n  useEffect(() => {\n    personService.getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  const changeMessage = (message=null, type='error') => {\n    const newMessage = {\n      message: message,\n      type: type\n    }\n    setErrorMessage(newMessage)\n  }\n\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterNameChange = (event) => {\n    setFilterName(event.target.value)\n  }\n  const checkExistingName = () => {\n    return persons.some(person => person.name === newName)\n  }\n  const checkExistingNumber = () => {\n    return persons.some(person => person.number === newNumber)\n  }\n\n\n  const addPerson = event => {\n    event.preventDefault()\n    \n    if(checkExistingNumber(newNumber)){\n      changeMessage(`There already is a person with the number ${newNumber}`, 'error')\n      setTimeout(() => changeMessage(), 5000)\n      return\n    }\n\n    if(checkExistingName(newName)){\n      if(window.confirm(`${newName} already exists! Replace the old number with a new one?`)){\n        const person = persons.find(person => person.name === newName)\n        const newPerson = {...person, number: newNumber}\n        \n        personService\n        .updatePerson(newPerson, person.id)\n        .then(response => {\n          setPersons(persons.map(n => person.id !== n.id ? n: response.data))\n          changeMessage(`Changed number of ${newName}`, 'success')\n          setTimeout(() => changeMessage(), 5000)\n        })\n        .catch(error => {\n          changeMessage(`Failed to update person: ${JSON.stringify(error.response.data.error)}`, 'error')\n          setTimeout(() => changeMessage(), 5000)\n        })\n        setNewName('')\n        setNewNumber('')\n        return\n      }\n      return\n    }\n    \n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    }\n    personService\n    .savePerson(newPerson)\n    .then(response => {\n      setPersons(persons.concat(response.data))\n    })\n    .catch(error => {\n      changeMessage(`Failed to add person: ${JSON.stringify(error.response.data.error)}`, 'error')\n      setTimeout(() => changeMessage(), 5000)\n      setNewName('')\n      setNewNumber('')\n      return\n    })\n    changeMessage(`Added ${newName}`, 'success')\n    setTimeout(() => changeMessage(), 5000)\n\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n\n\n  const removePerson = id => {\n    const removedPerson = persons.find(person => person.id === id).name\n    if(window.confirm(`Deleting id:${id}, are you sure?`)){\n      personService\n      .deletePerson(id)\n      .catch(error => {\n        changeMessage(`Failed to remove person: ${JSON.stringify(error.response.data.error)}`, 'error')\n        setTimeout(() => changeMessage(), 5000)\n        return\n      })\n      setPersons(persons.filter(person => person.id !== id))\n      changeMessage(`Removed ${removedPerson}`, 'success')\n      setTimeout(()=>changeMessage(), 5000)\n      return\n    }else{\n      return\n    }\n  }\n\n\n  const personsToShow = persons.filter(person => person.name.includes(filterName))\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification messageObject={errorMessage}/>\n      <Filter filterName={filterName} handleFilterNameChange={handleFilterNameChange}/>\n      <h2>Add a new person</h2>\n      <PersonForm\n      addPerson={addPerson}\n      newName={newName}\n      newNumber={newNumber}\n      handleNameChange={handleNameChange}\n      handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={personsToShow} removePerson={removePerson}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\n/* import './index.css'; */\nimport App from './App'\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}